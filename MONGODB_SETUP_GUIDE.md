# MongoDB Level System Setup Guide## ğŸ“‹ MÃ´ táº£HÆ°á»›ng dáº«n thiáº¿t láº­p MongoDB Ä‘á»ƒ lÆ°u trá»¯ level system thay vÃ¬ file JSON.## ğŸ› ï¸ CÃ i Ä‘áº·t MongoDB### Option 1: MongoDB Local (KhuyÃªn dÃ¹ng cho development)1. **Download MongoDB Community Server:**   - Truy cáº­p: https://www.mongodb.com/try/download/community   - Download phiÃªn báº£n cho Windows   - CÃ i Ä‘áº·t vá»›i default settings2. **Khá»Ÿi Ä‘á»™ng MongoDB:**   ```bash   # Windows (sau khi cÃ i Ä‘áº·t)   net start MongoDB      # Hoáº·c cháº¡y trá»±c tiáº¿p   "C:\Program Files\MongoDB\Server\7.0\bin\mongod.exe" --dbpath "C:\data\db"   ```### Option 2: MongoDB Atlas (Cloud - Free)1. **Táº¡o account táº¡i:** https://cloud.mongodb.com/2. **Táº¡o free cluster**3. **Láº¥y connection string vÃ  paste vÃ o .env**## âš™ï¸ Cáº¥u hÃ¬nh### 1. Environment Variables (.env)```env# MongoDB ConfigurationMONGODB_URL = mongodb://localhost:27017/  # Local MongoDB# Hoáº·c cho Atlas: mongodb+srv://username:password@cluster.xxx.mongodb.net/MONGODB_DB = discord_bot```### 2. Install thÆ° viá»‡n```bashpip install pymongo```## ğŸ”„ Migration tá»« JSON### Chuyá»ƒn dá»¯ liá»‡u cÅ© (náº¿u cÃ³):```bashpython migrate_levels_to_mongo.py```Script nÃ y sáº½:- Äá»c file `data/levels.json`- Chuyá»ƒn toÃ n bá»™ dá»¯ liá»‡u sang MongoDB- Backup file JSON cÅ©- Verify dá»¯ liá»‡u Ä‘Ã£ chuyá»ƒn Ä‘Ãºng## ğŸ® Sá»­ dá»¥ng### Load cog má»›i:1. **Unload cog cÅ©** (náº¿u Ä‘ang dÃ¹ng):   ```python   await bot.unload_extension('cogs.level_system')   ```2. **Load cog MongoDB:**   ```python   await bot.load_extension('cogs.level_system_mongo')   ```### Commands má»›i:- `/level` - Xem level cá»§a báº¡n- `/leaderboard` - Báº£ng xáº¿p háº¡ng  - `/reset_level @user` - [ADMIN] Reset level user## ğŸ“Š Database Structure### Collection: `levels````json{  "_id": ObjectId("..."),  "user_id": "123456789012345678",  "xp": 150,  "level": 3,  "last_updated": ISODate("2025-08-27T10:30:00Z"),  "migrated_from_json": true}```## ğŸ”§ Troubleshooting### Lá»—i káº¿t ná»‘i MongoDB:1. **Kiá»ƒm tra MongoDB service Ä‘ang cháº¡y:**   ```bash   # Windows   sc query MongoDB      # Náº¿u stopped, start láº¡i   net start MongoDB   ```2. **Kiá»ƒm tra connection string trong .env**3. **Kiá»ƒm tra firewall/network**### Lá»—i import pymongo:```bashpip install pymongo```### Performance optimization:- Táº¡o index cho user_id:  ```javascript  db.levels.createIndex({"user_id": 1})  ```## ğŸ¯ LÆ°u Ã½### Æ¯u Ä‘iá»ƒm MongoDB:- âœ… Hiá»‡u suáº¥t cao hÆ¡n JSON file- âœ… Concurrent access an toÃ n- âœ… Backup tá»± Ä‘á»™ng- âœ… Scalable- âœ… Query linh hoáº¡t### Migration tá»« file cÅ©:- File `level_system.py` váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng- Cháº¡y song song Ä‘Æ°á»£c (khÃ¡c tÃªn cog)- Data khÃ´ng bá»‹ máº¥t khi chuyá»ƒn Ä‘á»•i## ğŸš€ Production Tips### MongoDB Atlas (Cloud):1. **Security:** Whitelist IP addresses2. **Backup:** Automatic trong Atlas3. **Monitoring:** Built-in performance metrics### Local MongoDB:1. **Backup:** Äá»‹nh ká»³ export database2. **Security:** Cáº¥u hÃ¬nh authentication3. **Storage:** Monitor disk space---âœ… **Sau khi setup xong, level system sáº½:**- LÆ°u trá»¯ trong MongoDB thay vÃ¬ JSON- Hiá»‡u suáº¥t cao hÆ¡n Ä‘Ã¡ng ká»ƒ- An toÃ n hÆ¡n vá»›i concurrent access- Dá»… dÃ ng backup vÃ  scale